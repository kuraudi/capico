{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/askeroff/Desktop/vscode/exchange/frontend/src/app/RoleContext.tsx"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\ntype TypeCoinInfo = {\r\n  name: string;\r\n  symbol: string;\r\n  url_logo: string;\r\n  price?: number;\r\n  price24hPcnt?: number;\r\n  turnover24h?: number;\r\n  lowPrice24h?: number;\r\n};\r\n\r\ntype TypeCoinName = { name: string; symbol: string; url_logo: string };\r\n\r\ninterface RoleContextType {\r\n  role: string;\r\n  coinPrices: TypeCoinInfo[];\r\n  setRole: (role: string) => void;\r\n}\r\n\r\nconst RoleContext = createContext<RoleContextType | undefined>(undefined);\r\nexport const RoleProvider = ({ children }: { children: React.ReactNode }) => {\r\n  const [role, setRole] = useState<string>(\"guest\"); // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é \"guest\"\r\n  const [coinPrices, setCoinPrices] = useState<TypeCoinInfo[]>([]);\r\n\r\n  useEffect(() => {\r\n    const savedRole = localStorage.getItem(\"role\");\r\n    if (savedRole) {\r\n      setRole(savedRole); // –ï—Å–ª–∏ –≤ LocalStorage –µ—Å—Ç—å —Ä–æ–ª—å ‚Äî –±–µ—Ä–µ–º –µ—ë\r\n    } else {\r\n      setRole(\"guest\"); // –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å—Ç–∞–≤–∏–º \"guest\"\r\n      localStorage.setItem(\"role\", \"guest\"); // –ò —Å—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ LocalStorage\r\n    }\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î –∏ –Ω–∞—á–∞–ª—å–Ω—ã—Ö —Ü–µ–Ω\r\n    const fetchCoins = async () => {\r\n      try {\r\n        // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –º–æ–Ω–µ—Ç –∏–∑ –ë–î\r\n        const { data: coins } = await axios.get<TypeCoinName[]>(\r\n          \"http://127.0.0.1:8000/market\"\r\n        );\r\n        console.log(\"üìå –ü–æ–ª—É—á–µ–Ω—ã –º–æ–Ω–µ—Ç—ã:\", coins);\r\n\r\n        // –ü–æ–ª—É—á–∞–µ–º –º–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã\r\n        const { data: metaInfo } = await axios.get(\r\n          \"http://127.0.0.1:8000/market/metainfo\"\r\n        );\r\n        const { data: initialPrices } = await axios.get(\r\n          \"http://127.0.0.1:8000/market/prices\"\r\n        );\r\n\r\n        console.log(\"üîç Meta Info:\", metaInfo);\r\n        console.log(\"üí∞ Initial Prices:\", initialPrices);\r\n\r\n        // –§–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤\r\n        const updatedPrices: TypeCoinInfo[] = coins.map((coin, index) => ({\r\n          ...metaInfo[index], // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ\r\n          price: 0,\r\n          price24hPcnt: 0,\r\n          turnover24h: 0,\r\n          lowPrice24h: 0,\r\n        }));\r\n\r\n        console.log(updatedPrices);\r\n\r\n        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–µ–π—Ç –∏ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å\r\n        setCoinPrices(updatedPrices);\r\n      } catch (error) {\r\n        console.error(\"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–Ω–µ—Ç:\", error);\r\n      }\r\n    };\r\n\r\n    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω –∏–∑ Redis\r\n    const updatePriceFromRedis = async () => {\r\n      try {\r\n        const { data: responce } = await axios.get(\r\n          \"http://127.0.0.1:8000/market/prices\"\r\n        );\r\n        console.log(responce, \"ahui\");\r\n\r\n        setCoinPrices((prev) =>\r\n          prev.map((coin) => ({\r\n            ...coin,\r\n            price24hPcnt: responce[coin.symbol + \"USDT\"]?.price24hPcnt,\r\n            price: responce[coin.symbol + \"USDT\"]?.price || 50,\r\n            turnover24h: responce[coin.symbol + \"USDT\"]?.turnover24h,\r\n            lowPrice24h: responce[coin.symbol + \"USDT\"]?.lowPrice24h,\r\n          }))\r\n        );\r\n      } catch (error) {\r\n        console.error(\"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–Ω –∏–∑ Redis:\", error);\r\n      }\r\n    };\r\n    fetchCoins();\r\n    const interval = setInterval(updatePriceFromRedis, 3000); // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—ã –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã\r\n\r\n    return () => clearInterval(interval); // –û—á–∏—Å—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏\r\n  }, []);\r\n\r\n  const updateRole = (newRole: string) => {\r\n    setRole(newRole);\r\n    localStorage.setItem(\"role\", newRole);\r\n  };\r\n\r\n  return (\r\n    <RoleContext.Provider value={{ role, setRole: updateRole, coinPrices }}>\r\n      {children}\r\n    </RoleContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useRole = () => {\r\n  const context = useContext(RoleContext);\r\n  if (!context) {\r\n    throw new Error(\"useRole must be used within a RoleProvider\");\r\n  }\r\n  return context;\r\n};\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAoBA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAA+B;AACxD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU,UAAU,uBAAuB;IAC1E,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB,EAAE;IAE/D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACb,QAAQ,YAAY,2CAA2C;QACjE,OAAO;YACL,QAAQ,UAAU,4BAA4B;YAC9C,aAAa,OAAO,CAAC,QAAQ,UAAU,mCAAmC;QAC5E;QAEA,oDAAoD;QACpD,MAAM,aAAa;YACjB,IAAI;gBACF,8BAA8B;gBAC9B,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CACrC;gBAEF,QAAQ,GAAG,CAAC,uBAAuB;gBAEnC,4CAA4C;gBAC5C,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CACxC;gBAEF,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAC7C;gBAGF,QAAQ,GAAG,CAAC,iBAAiB;gBAC7B,QAAQ,GAAG,CAAC,sBAAsB;gBAElC,4BAA4B;gBAC5B,MAAM,gBAAgC,MAAM,GAAG,CAAC,CAAC,MAAM,QAAU,CAAC;wBAChE,GAAG,QAAQ,CAAC,MAAM;wBAClB,OAAO;wBACP,cAAc;wBACd,aAAa;wBACb,aAAa;oBACf,CAAC;gBAED,QAAQ,GAAG,CAAC;gBAEZ,6BAA6B;gBAC7B,cAAc;YAChB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,4BAA4B;YAC5C;QACF;QAEA,qDAAqD;QACrD,MAAM,uBAAuB;YAC3B,IAAI;gBACF,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CACxC;gBAEF,QAAQ,GAAG,CAAC,UAAU;gBAEtB,cAAc,CAAC,OACb,KAAK,GAAG,CAAC,CAAC,OAAS,CAAC;4BAClB,GAAG,IAAI;4BACP,cAAc,QAAQ,CAAC,KAAK,MAAM,GAAG,OAAO,EAAE;4BAC9C,OAAO,QAAQ,CAAC,KAAK,MAAM,GAAG,OAAO,EAAE,SAAS;4BAChD,aAAa,QAAQ,CAAC,KAAK,MAAM,GAAG,OAAO,EAAE;4BAC7C,aAAa,QAAQ,CAAC,KAAK,MAAM,GAAG,OAAO,EAAE;wBAC/C,CAAC;YAEL,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,mCAAmC;YACnD;QACF;QACA;QACA,MAAM,WAAW,YAAY,sBAAsB,OAAO,kCAAkC;QAE5F,OAAO,IAAM,cAAc,WAAW,wCAAwC;IAChF,GAAG,EAAE;IAEL,MAAM,aAAa,CAAC;QAClB,QAAQ;QACR,aAAa,OAAO,CAAC,QAAQ;IAC/B;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM,SAAS;YAAY;QAAW;kBAClE;;;;;;AAGP;AAEO,MAAM,UAAU;IACrB,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/askeroff/Desktop/vscode/exchange/frontend/src/app/layout.tsx"],"sourcesContent":["\"use client\";\nimport \"./globals.css\";\nimport \"./resets.css\";\nimport { RoleProvider } from \"./RoleContext\";\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\">\n      <head></head>\n      <RoleProvider>\n        <body>{children}</body>\n      </RoleProvider>\n    </html>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;;;AAKe,SAAS,WAAW,EACjC,QAAQ,EAGR;IACA,qBACE,8OAAC;QAAK,MAAK;;0BACT,8OAAC;;;;;0BACD,8OAAC,0HAAA,CAAA,eAAY;0BACX,cAAA,8OAAC;8BAAM;;;;;;;;;;;;;;;;;AAIf"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}